<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caring Moms Community ‚Äî Quote Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #7d9a78;
            --sage-dark: #5c7a57;
            --sage-light: #a8c4a2;
            --cream: #faf8f5;
            --cream-dark: #f0ebe3;
            --warm-brown: #6b5b4f;
            --soft-gold: #d4a853;
            --blush: #e8d5d0;
            --text: #3d3d3d;
            --text-light: #666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, var(--cream-dark) 100%);
            min-height: 100vh;
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(125, 154, 120, 0.1);
            border: 1px solid var(--sage-light);
        }

        .header h1 {
            font-family: 'Fraunces', Georgia, serif;
            font-size: 2.2rem;
            color: var(--sage-dark);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .header p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .badge {
            display: inline-block;
            background: var(--sage);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 2rem;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            margin-bottom: 1.5rem;
            border: 1px solid rgba(125, 154, 120, 0.15);
        }

        .card-title {
            font-family: 'Fraunces', Georgia, serif;
            font-size: 1.25rem;
            color: var(--sage-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Client Info */
        .client-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .input-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .input-group input,
        .input-group select {
            padding: 0.7rem 1rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.2s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--sage);
            box-shadow: 0 0 0 3px rgba(125, 154, 120, 0.15);
        }

        /* Service Selection */
        .service-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .service-option {
            flex: 1;
            position: relative;
        }

        .service-option input {
            position: absolute;
            opacity: 0;
        }

        .service-option label {
            display: block;
            padding: 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.25s;
            text-align: center;
        }

        .service-option input:checked + label {
            border-color: var(--sage);
            background: linear-gradient(135deg, rgba(125, 154, 120, 0.08) 0%, rgba(168, 196, 162, 0.12) 100%);
            box-shadow: 0 4px 12px rgba(125, 154, 120, 0.15);
        }

        .service-option label:hover {
            border-color: var(--sage-light);
        }

        .service-name {
            font-family: 'Fraunces', Georgia, serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.3rem;
        }

        .service-desc {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .service-price {
            font-weight: 600;
            color: var(--sage-dark);
            margin-top: 0.5rem;
        }

        /* Home Size Grid */
        .home-size-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
        }

        .home-size-option {
            position: relative;
        }

        .home-size-option input {
            position: absolute;
            opacity: 0;
        }

        .home-size-option label {
            display: block;
            padding: 0.8rem 0.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .home-size-option input:checked + label {
            border-color: var(--sage);
            background: var(--sage);
            color: white;
        }

        .home-size-option label:hover {
            border-color: var(--sage-light);
        }

        /* Family Care Toggle */
        .family-care-toggle {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.2rem;
            background: linear-gradient(135deg, var(--blush) 0%, rgba(232, 213, 208, 0.5) 100%);
            border-radius: 12px;
            margin-top: 1rem;
        }

        .toggle-switch {
            position: relative;
            width: 52px;
            height: 28px;
            flex-shrink: 0;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--sage);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        .toggle-text {
            flex: 1;
        }

        .toggle-text strong {
            display: block;
            color: var(--warm-brown);
        }

        .toggle-text span {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .toggle-price {
            font-weight: 600;
            color: var(--sage-dark);
        }

        /* Add-ons */
        .addons-section {
            margin-top: 0.5rem;
        }

        .addon-category {
            margin-bottom: 1rem;
        }

        .addon-category-title {
            font-weight: 600;
            color: var(--warm-brown);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .addon-grid {
            display: grid;
            gap: 0.4rem;
        }

        .addon-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.6rem 0.8rem;
            background: var(--cream);
            border-radius: 8px;
            transition: all 0.2s;
        }

        .addon-item:hover {
            background: var(--cream-dark);
        }

        .addon-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--sage);
            cursor: pointer;
        }

        .addon-item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .addon-price {
            font-weight: 500;
            color: var(--sage-dark);
            font-size: 0.9rem;
        }

        .addon-qty {
            width: 60px;
            padding: 0.3rem 0.5rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 6px;
            text-align: center;
            font-size: 0.9rem;
        }

        .addon-qty:focus {
            outline: none;
            border-color: var(--sage);
        }

        /* Recurring & Referral */
        .discount-row {
            display: flex;
            gap: 1rem;
        }

        .discount-option {
            flex: 1;
        }

        .discount-option select {
            width: 100%;
            padding: 0.7rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 10px;
            font-size: 0.95rem;
            background: white;
            cursor: pointer;
        }

        .discount-option select:focus {
            outline: none;
            border-color: var(--sage);
        }

        .referral-toggle {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-top: 1rem;
            padding: 0.8rem 1rem;
            background: linear-gradient(135deg, rgba(212, 168, 83, 0.15) 0%, rgba(212, 168, 83, 0.08) 100%);
            border-radius: 10px;
        }

        .referral-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--soft-gold);
        }

        /* Summary Panel */
        .summary-panel {
            position: sticky;
            top: 2rem;
        }

        .summary-card {
            background: linear-gradient(145deg, var(--sage-dark) 0%, var(--sage) 100%);
            color: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 8px 30px rgba(92, 122, 87, 0.3);
        }

        .summary-title {
            font-family: 'Fraunces', Georgia, serif;
            font-size: 1.3rem;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .summary-section {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .summary-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.35rem 0;
            font-size: 0.95rem;
        }

        .summary-row.sub {
            padding-left: 1rem;
            font-size: 0.85rem;
            opacity: 0.85;
        }

        .summary-label {
            opacity: 0.9;
        }

        .summary-value {
            font-weight: 600;
        }

        .summary-discount {
            color: #a8e6a8;
        }

        .summary-total {
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .total-label {
            font-size: 1.1rem;
        }

        .total-amount {
            font-family: 'Fraunces', Georgia, serif;
            font-size: 2rem;
            font-weight: 700;
        }

        .time-estimate {
            text-align: center;
            margin-top: 0.8rem;
            padding-top: 0.8rem;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .btn-save {
            width: 100%;
            padding: 1rem;
            background: var(--soft-gold);
            color: var(--warm-brown);
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-save:hover {
            background: #c49943;
            transform: translateY(-1px);
        }

        .btn-save:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .save-status {
            text-align: center;
            padding: 0.5rem;
            margin-top: 0.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            display: none;
        }

        .save-status.success {
            display: block;
            background: rgba(168, 230, 168, 0.3);
            color: #2d5a2d;
        }

        .save-status.error {
            display: block;
            background: rgba(230, 168, 168, 0.3);
            color: #5a2d2d;
        }

        .save-status.loading {
            display: block;
            background: rgba(168, 196, 230, 0.3);
            color: #2d3d5a;
        }

        /* Buttons */
        .btn-print {
            width: 100%;
            padding: 1rem;
            background: white;
            color: var(--sage-dark);
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .btn-print:hover {
            background: var(--cream);
            transform: translateY(-1px);
        }

        .btn-reset {
            width: 100%;
            padding: 0.8rem;
            background: transparent;
            color: rgba(255,255,255,0.8);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 0.8rem;
            transition: all 0.2s;
        }

        .btn-reset:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        /* Notes */
        .notes-card {
            background: rgba(212, 168, 83, 0.1);
            border: 1px solid rgba(212, 168, 83, 0.3);
        }

        .notes-card ul {
            list-style: none;
            font-size: 0.9rem;
        }

        .notes-card li {
            padding: 0.3rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .notes-card li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0.5rem;
            color: var(--soft-gold);
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            .container {
                padding: 0;
                max-width: none;
            }

            .main-grid {
                display: block;
            }

            .card:not(.print-quote),
            .btn-print,
            .btn-reset,
            .header {
                display: none !important;
            }

            .summary-panel {
                position: static;
            }

            .print-quote {
                display: block !important;
                max-width: 600px;
                margin: 0 auto;
                box-shadow: none;
                border: 2px solid var(--sage);
            }

            .print-header {
                text-align: center;
                margin-bottom: 1.5rem;
                padding-bottom: 1rem;
                border-bottom: 2px solid var(--sage-light);
            }

            .print-header h2 {
                font-family: 'Fraunces', Georgia, serif;
                color: var(--sage-dark);
                font-size: 1.5rem;
            }

            .print-header p {
                color: var(--text-light);
                font-size: 0.9rem;
            }

            .print-section {
                margin-bottom: 1rem;
            }

            .print-section-title {
                font-weight: 600;
                color: var(--sage-dark);
                margin-bottom: 0.5rem;
                padding-bottom: 0.3rem;
                border-bottom: 1px solid #e0e0e0;
            }

            .print-row {
                display: flex;
                justify-content: space-between;
                padding: 0.4rem 0;
            }

            .print-total {
                margin-top: 1rem;
                padding: 1rem;
                background: var(--cream);
                border-radius: 10px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .print-total-label {
                font-weight: 600;
                font-size: 1.1rem;
            }

            .print-total-amount {
                font-family: 'Fraunces', Georgia, serif;
                font-size: 1.8rem;
                font-weight: 700;
                color: var(--sage-dark);
            }

            .print-footer {
                margin-top: 1.5rem;
                padding-top: 1rem;
                border-top: 1px solid #e0e0e0;
                text-align: center;
                font-size: 0.85rem;
                color: var(--text-light);
            }
        }

        .print-quote {
            display: none;
        }

        /* Carpet/Upholstery Minimum Warning */
        .minimum-warning {
            display: none;
            padding: 0.6rem 1rem;
            background: rgba(212, 168, 83, 0.2);
            border: 1px solid var(--soft-gold);
            border-radius: 8px;
            margin-top: 0.8rem;
            font-size: 0.85rem;
            color: var(--warm-brown);
        }

        .minimum-warning.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåø Caring Moms Community</h1>
            <p>Porter Ranch Cleaning ‚Äî Quote Calculator</p>
            <span class="badge">Internal Tool ‚Äî Mom on the Line</span>
        </div>

        <div class="main-grid">
            <!-- Left Column - Inputs -->
            <div class="input-column">
                
                <!-- Client Info -->
                <div class="card">
                    <div class="card-title">üìã Client Information</div>
                    <div class="client-info-grid">
                        <div class="input-group">
                            <label>Client Name</label>
                            <input type="text" id="clientName" placeholder="Jane Smith">
                        </div>
                        <div class="input-group">
                            <label>Phone</label>
                            <input type="tel" id="clientPhone" placeholder="(818) 555-0123">
                        </div>
                        <div class="input-group" style="grid-column: span 2;">
                            <label>Address</label>
                            <input type="text" id="clientAddress" placeholder="123 Main St, Porter Ranch">
                        </div>
                        <div class="input-group" style="grid-column: span 2;">
                            <label>Notes</label>
                            <textarea id="clientNotes" placeholder="Any special requests, access instructions, pet info, etc." rows="2" style="padding: 0.7rem 1rem; border: 1.5px solid #e0e0e0; border-radius: 10px; font-size: 1rem; font-family: inherit; resize: vertical;"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Service Type -->
                <div class="card">
                    <div class="card-title">üßº Service Type</div>
                    <div class="service-options">
                        <div class="service-option">
                            <input type="radio" id="serviceBasic" name="serviceType" value="basic">
                            <label for="serviceBasic">
                                <div class="service-name">Basic Clean</div>
                                <div class="service-desc">Standard / Maintenance</div>
                                <div class="service-price" id="basicPriceDisplay">From $160</div>
                            </label>
                        </div>
                        <div class="service-option">
                            <input type="radio" id="servicePremium" name="serviceType" value="premium" checked>
                            <label for="servicePremium">
                                <div class="service-name">Premium Clean</div>
                                <div class="service-desc">Deep Clean / Reset</div>
                                <div class="service-price" id="premiumPriceDisplay">From $220</div>
                            </label>
                        </div>
                    </div>

                    <div class="input-group">
                        <label style="margin-bottom: 0.5rem;">Home Size</label>
                        <div class="home-size-grid" style="grid-template-columns: repeat(4, 1fr);">
                            <div class="home-size-option">
                                <input type="radio" id="size1b1b" name="homeSize" value="1b1b">
                                <label for="size1b1b">1 bed<br>1 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size2b1b" name="homeSize" value="2b1b">
                                <label for="size2b1b">2 bed<br>1 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size2b2b" name="homeSize" value="2b2b">
                                <label for="size2b2b">2 bed<br>2 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size3b2b" name="homeSize" value="3b2b" checked>
                                <label for="size3b2b">3 bed<br>2 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size3b3b" name="homeSize" value="3b3b">
                                <label for="size3b3b">3 bed<br>3 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size4b3b" name="homeSize" value="4b3b">
                                <label for="size4b3b">4 bed<br>3 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size4b4b" name="homeSize" value="4b4b">
                                <label for="size4b4b">4 bed<br>4 bath</label>
                            </div>
                            <div class="home-size-option">
                                <input type="radio" id="size5b4b" name="homeSize" value="5b4b">
                                <label for="size5b4b">5 bed<br>4 bath</label>
                            </div>
                        </div>
                    </div>

                    <!-- Family Care Add-on -->
                    <div class="family-care-toggle">
                        <label class="toggle-switch">
                            <input type="checkbox" id="familyCare">
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="toggle-text">
                            <strong>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Care Clean</strong>
                            <span>Bed making, kid/pet areas, family-safe products</span>
                        </div>
                        <div class="toggle-price">+$50</div>
                    </div>
                </div>

                <!-- Add-ons -->
                <div class="card">
                    <div class="card-title">‚ûï Add-Ons</div>
                    <div class="addons-section">
                        
                        <!-- Kitchen Add-ons -->
                        <div class="addon-category">
                            <div class="addon-category-title">üç≥ Kitchen</div>
                            <div class="addon-grid">
                                <div class="addon-item">
                                    <input type="checkbox" id="addonFridge">
                                    <label for="addonFridge">Inside refrigerator</label>
                                    <span class="addon-price">$30</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonOven">
                                    <label for="addonOven">Inside oven</label>
                                    <span class="addon-price">$40</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonCabinets">
                                    <label for="addonCabinets">Inside cabinets/drawers</label>
                                    <input type="number" id="addonCabinetsQty" class="addon-qty" value="0" min="0" max="50">
                                    <span class="addon-price">√ó $7</span>
                                </div>
                            </div>
                        </div>

                        <!-- Laundry Add-on -->
                        <div class="addon-category">
                            <div class="addon-category-title">üõèÔ∏è Laundry</div>
                            <div class="addon-grid">
                                <div class="addon-item">
                                    <input type="checkbox" id="addonLaundry">
                                    <label for="addonLaundry">Laundry (wash, dry, fold)</label>
                                    <input type="number" id="addonLaundryQty" class="addon-qty" value="1" min="1" max="5">
                                    <span class="addon-price">√ó $30/load</span>
                                </div>
                            </div>
                        </div>

                        <!-- Upholstery Add-ons -->
                        <div class="addon-category">
                            <div class="addon-category-title">üõãÔ∏è Upholstery (Wet Extraction)</div>
                            <div class="addon-grid">
                                <div class="addon-item">
                                    <input type="checkbox" id="addonDiningChair">
                                    <label for="addonDiningChair">Dining/accent chair</label>
                                    <input type="number" id="addonDiningChairQty" class="addon-qty" value="1" min="1" max="12">
                                    <span class="addon-price">√ó $30</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonArmchair">
                                    <label for="addonArmchair">Armchair</label>
                                    <input type="number" id="addonArmchairQty" class="addon-qty" value="1" min="1" max="6">
                                    <span class="addon-price">√ó $40</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonLoveseat">
                                    <label for="addonLoveseat">Loveseat</label>
                                    <input type="number" id="addonLoveseatQty" class="addon-qty" value="1" min="1" max="4">
                                    <span class="addon-price">√ó $70</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonSofa">
                                    <label for="addonSofa">Sofa (2-3 seats)</label>
                                    <input type="number" id="addonSofaQty" class="addon-qty" value="1" min="1" max="4">
                                    <span class="addon-price">√ó $90</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonSectional">
                                    <label for="addonSectional">Sectional</label>
                                    <input type="number" id="addonSectionalQty" class="addon-qty" value="1" min="1" max="3">
                                    <span class="addon-price">√ó $140</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonMattress1">
                                    <label for="addonMattress1">Mattress (one side)</label>
                                    <input type="number" id="addonMattress1Qty" class="addon-qty" value="1" min="1" max="6">
                                    <span class="addon-price">√ó $70</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonMattress2">
                                    <label for="addonMattress2">Mattress (both sides)</label>
                                    <input type="number" id="addonMattress2Qty" class="addon-qty" value="1" min="1" max="6">
                                    <span class="addon-price">√ó $110</span>
                                </div>
                            </div>
                        </div>

                        <!-- Carpet Add-ons -->
                        <div class="addon-category">
                            <div class="addon-category-title">üßπ Carpet (Wet Extraction)</div>
                            <div class="addon-grid">
                                <div class="addon-item">
                                    <input type="checkbox" id="addonCarpetSmall">
                                    <label for="addonCarpetSmall">Small room</label>
                                    <input type="number" id="addonCarpetSmallQty" class="addon-qty" value="1" min="1" max="10">
                                    <span class="addon-price">√ó $50</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonCarpetMed">
                                    <label for="addonCarpetMed">Medium room</label>
                                    <input type="number" id="addonCarpetMedQty" class="addon-qty" value="1" min="1" max="10">
                                    <span class="addon-price">√ó $60</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonCarpetLarge">
                                    <label for="addonCarpetLarge">Large room</label>
                                    <input type="number" id="addonCarpetLargeQty" class="addon-qty" value="1" min="1" max="10">
                                    <span class="addon-price">√ó $70</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonHallStairs">
                                    <label for="addonHallStairs">Hallway/stairs</label>
                                    <input type="number" id="addonHallStairsQty" class="addon-qty" value="1" min="1" max="5">
                                    <span class="addon-price">√ó $40</span>
                                </div>
                                <div class="addon-item">
                                    <input type="checkbox" id="addonAreaRug">
                                    <label for="addonAreaRug">Area rug (on-site)</label>
                                    <input type="number" id="addonAreaRugQty" class="addon-qty" value="1" min="1" max="10">
                                    <span class="addon-price">√ó $50</span>
                                </div>
                            </div>
                            <div class="minimum-warning" id="extractionWarning">
                                ‚ö†Ô∏è Carpet & upholstery services require $120 minimum. Add more items or combine with cleaning.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Discounts -->
                <div class="card">
                    <div class="card-title">üîÅ Discounts</div>
                    <div class="discount-row">
                        <div class="discount-option">
                            <div class="input-group">
                                <label>Recurring Service</label>
                                <select id="recurringDiscount">
                                    <option value="0">One-time / First Clean</option>
                                    <option value="10">Weekly (10% off)</option>
                                    <option value="7">Bi-weekly (7% off)</option>
                                    <option value="5">Monthly (5% off)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="referral-toggle">
                        <input type="checkbox" id="referralDiscount">
                        <label for="referralDiscount"><strong>ü§ù Referral Thank-You:</strong> $25 off (neighbor referred)</label>
                    </div>
                </div>

                <!-- Notes -->
                <div class="card notes-card">
                    <div class="card-title">üìù Important Notes</div>
                    <ul>
                        <li>Prices assume a well-maintained home</li>
                        <li>One standard kitchen included</li>
                        <li>Showers and bathtubs always included</li>
                        <li>Decluttering & organizing not included</li>
                        <li>Stain or odor removal not guaranteed</li>
                        <li>Time may vary based on condition & add-ons</li>
                    </ul>
                </div>
            </div>

            <!-- Right Column - Summary -->
            <div class="summary-panel">
                <div class="summary-card">
                    <div class="summary-title">üìã Quote Summary</div>
                    
                    <div class="summary-section" id="summaryDetails">
                        <!-- Dynamically populated -->
                    </div>

                    <div class="summary-total">
                        <div class="total-row">
                            <span class="total-label">Total</span>
                            <span class="total-amount" id="totalAmount">$340</span>
                        </div>
                        <div class="time-estimate" id="timeEstimate">
                            ‚è±Ô∏è Est. 5.5 hrs (1 mom) or 2.75 hrs (2 moms)
                        </div>
                    </div>

                    <button class="btn-save" onclick="saveQuote()" id="btnSave">
                        üíæ Save Quote to Sheet
                    </button>
                    <div class="save-status" id="saveStatus"></div>
                    <button class="btn-print" onclick="printQuote()">
                        üñ®Ô∏è Print Quote
                    </button>
                    <button class="btn-reset" onclick="resetForm()">
                        Reset Calculator
                    </button>
                </div>
            </div>
        </div>

        <!-- Print Quote Template -->
        <div class="card print-quote" id="printQuote">
            <div class="print-header">
                <h2>üåø Caring Moms Community</h2>
                <p>Porter Ranch Cleaning Quote</p>
                <p id="printDate"></p>
            </div>
            
            <div class="print-section">
                <div class="print-section-title">Client Information</div>
                <div class="print-row">
                    <span>Name:</span>
                    <span id="printClientName">‚Äî</span>
                </div>
                <div class="print-row">
                    <span>Phone:</span>
                    <span id="printClientPhone">‚Äî</span>
                </div>
                <div class="print-row">
                    <span>Address:</span>
                    <span id="printClientAddress">‚Äî</span>
                </div>
                <div class="print-row" id="printNotesRow" style="display: none;">
                    <span>Notes:</span>
                    <span id="printClientNotes">‚Äî</span>
                </div>
            </div>

            <div class="print-section">
                <div class="print-section-title">Service Details</div>
                <div id="printServiceDetails">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <div class="print-total">
                <span class="print-total-label">Total Quote</span>
                <span class="print-total-amount" id="printTotal">$340</span>
            </div>

            <div class="print-footer">
                <p>Valid for 30 days ‚Ä¢ 24-hour cancellation policy ($50 fee for shorter notice)</p>
                <p>First cleaning requires card payment ‚Ä¢ Questions? Call us!</p>
            </div>
        </div>
    </div>

    <script>
        // Pricing Data
        const pricing = {
            basic: {
                '1b1b': { price: 160, hours1: 2.5 },
                '2b1b': { price: 180, hours1: 3.0 },
                '2b2b': { price: 200, hours1: 3.5 },
                '3b2b': { price: 250, hours1: 4.5 },
                '3b3b': { price: 300, hours1: 5.5 },
                '4b3b': { price: 350, hours1: 6.5 },
                '4b4b': { price: 400, hours1: 7.5 },
                '5b4b': { price: 450, hours1: 8.5 }
            },
            premium: {
                '1b1b': { price: 220, hours1: 3.0 },
                '2b1b': { price: 250, hours1: 4.0 },
                '2b2b': { price: 280, hours1: 4.5 },
                '3b2b': { price: 340, hours1: 5.5 },
                '3b3b': { price: 400, hours1: 6.5 },
                '4b3b': { price: 470, hours1: 7.5 },
                '4b4b': { price: 540, hours1: 8.5 },
                '5b4b': { price: 610, hours1: 9.5 }
            }
        };

        const addons = {
            addonFridge: { price: 30, name: 'Inside refrigerator' },
            addonOven: { price: 40, name: 'Inside oven' },
            addonCabinets: { price: 7, name: 'Cabinets/drawers', hasQty: true, qtyId: 'addonCabinetsQty' },
            addonLaundry: { price: 30, name: 'Laundry load', hasQty: true, qtyId: 'addonLaundryQty' },
            addonDiningChair: { price: 30, name: 'Dining/accent chair', hasQty: true, qtyId: 'addonDiningChairQty', extraction: true },
            addonArmchair: { price: 40, name: 'Armchair', hasQty: true, qtyId: 'addonArmchairQty', extraction: true },
            addonLoveseat: { price: 70, name: 'Loveseat', hasQty: true, qtyId: 'addonLoveseatQty', extraction: true },
            addonSofa: { price: 90, name: 'Sofa', hasQty: true, qtyId: 'addonSofaQty', extraction: true },
            addonSectional: { price: 140, name: 'Sectional', hasQty: true, qtyId: 'addonSectionalQty', extraction: true },
            addonMattress1: { price: 70, name: 'Mattress (1 side)', hasQty: true, qtyId: 'addonMattress1Qty', extraction: true },
            addonMattress2: { price: 110, name: 'Mattress (both)', hasQty: true, qtyId: 'addonMattress2Qty', extraction: true },
            addonCarpetSmall: { price: 50, name: 'Carpet - small room', hasQty: true, qtyId: 'addonCarpetSmallQty', extraction: true },
            addonCarpetMed: { price: 60, name: 'Carpet - medium room', hasQty: true, qtyId: 'addonCarpetMedQty', extraction: true },
            addonCarpetLarge: { price: 70, name: 'Carpet - large room', hasQty: true, qtyId: 'addonCarpetLargeQty', extraction: true },
            addonHallStairs: { price: 40, name: 'Hallway/stairs', hasQty: true, qtyId: 'addonHallStairsQty', extraction: true },
            addonAreaRug: { price: 50, name: 'Area rug', hasQty: true, qtyId: 'addonAreaRugQty', extraction: true }
        };

        function getSelectedHomeSize() {
            const selected = document.querySelector('input[name="homeSize"]:checked');
            return selected ? selected.value : '3b2b';
        }

        function getSelectedServiceType() {
            const selected = document.querySelector('input[name="serviceType"]:checked');
            return selected ? selected.value : 'premium';
        }

        function formatHomeSize(size) {
            const map = {
                '1b1b': '1 bed / 1 bath',
                '2b1b': '2 bed / 1 bath',
                '2b2b': '2 bed / 2 bath',
                '3b2b': '3 bed / 2 bath',
                '3b3b': '3 bed / 3 bath',
                '4b3b': '4 bed / 3 bath',
                '4b4b': '4 bed / 4 bath',
                '5b4b': '5 bed / 4 bath'
            };
            return map[size] || size;
        }

        function calculate() {
            const serviceType = getSelectedServiceType();
            const homeSize = getSelectedHomeSize();
            const familyCare = document.getElementById('familyCare').checked;
            const recurringDiscount = parseInt(document.getElementById('recurringDiscount').value) || 0;
            const referralDiscount = document.getElementById('referralDiscount').checked ? 25 : 0;

            // Base price
            const baseData = pricing[serviceType][homeSize];
            let basePrice = baseData.price;
            let hours1 = baseData.hours1;

            // Family care
            let familyCarePrice = familyCare ? 50 : 0;

            // Add-ons
            let addonsTotal = 0;
            let extractionTotal = 0;
            let addonsList = [];

            for (const [id, data] of Object.entries(addons)) {
                const checkbox = document.getElementById(id);
                if (checkbox && checkbox.checked) {
                    let qty = 1;
                    if (data.hasQty) {
                        qty = parseInt(document.getElementById(data.qtyId).value) || 1;
                    }
                    const itemTotal = data.price * qty;
                    addonsTotal += itemTotal;
                    
                    if (data.extraction) {
                        extractionTotal += itemTotal;
                    }
                    
                    addonsList.push({
                        name: data.name,
                        qty: qty,
                        price: data.price,
                        total: itemTotal
                    });
                }
            }

            // Check extraction minimum
            const extractionWarning = document.getElementById('extractionWarning');
            if (extractionTotal > 0 && extractionTotal < 120 && basePrice === 0) {
                extractionWarning.classList.add('show');
            } else {
                extractionWarning.classList.remove('show');
            }

            // Subtotal before discounts
            let subtotal = basePrice + familyCarePrice + addonsTotal;

            // Calculate discounts
            let discountAmount = 0;
            if (recurringDiscount > 0) {
                discountAmount = Math.round(subtotal * (recurringDiscount / 100));
            }

            // Total
            let total = subtotal - discountAmount - referralDiscount;

            // Update summary
            updateSummary(serviceType, homeSize, basePrice, familyCare, familyCarePrice, addonsList, addonsTotal, recurringDiscount, discountAmount, referralDiscount, total, hours1);
        }

        function updateSummary(serviceType, homeSize, basePrice, familyCare, familyCarePrice, addonsList, addonsTotal, recurringPct, discountAmount, referralDiscount, total, hours1) {
            const summaryDetails = document.getElementById('summaryDetails');
            const serviceName = serviceType === 'premium' ? 'Premium Clean' : 'Basic Clean';
            
            let html = `
                <div class="summary-row">
                    <span class="summary-label">${serviceName} (${formatHomeSize(homeSize)})</span>
                    <span class="summary-value">$${basePrice}</span>
                </div>
            `;

            if (familyCare) {
                html += `
                    <div class="summary-row sub">
                        <span class="summary-label">+ Family Care</span>
                        <span class="summary-value">$${familyCarePrice}</span>
                    </div>
                `;
            }

            if (addonsList.length > 0) {
                html += `<div class="summary-row" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);"><span class="summary-label"><strong>Add-Ons</strong></span><span class="summary-value">$${addonsTotal}</span></div>`;
                
                for (const addon of addonsList) {
                    const qtyText = addon.qty > 1 ? ` (√ó${addon.qty})` : '';
                    html += `
                        <div class="summary-row sub">
                            <span class="summary-label">${addon.name}${qtyText}</span>
                            <span class="summary-value">$${addon.total}</span>
                        </div>
                    `;
                }
            }

            if (discountAmount > 0 || referralDiscount > 0) {
                html += `<div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);"></div>`;
            }

            if (discountAmount > 0) {
                html += `
                    <div class="summary-row">
                        <span class="summary-label">Recurring Discount (${recurringPct}%)</span>
                        <span class="summary-value summary-discount">-$${discountAmount}</span>
                    </div>
                `;
            }

            if (referralDiscount > 0) {
                html += `
                    <div class="summary-row">
                        <span class="summary-label">Referral Thank-You</span>
                        <span class="summary-value summary-discount">-$${referralDiscount}</span>
                    </div>
                `;
            }

            summaryDetails.innerHTML = html;
            document.getElementById('totalAmount').textContent = `$${total}`;
            
            const hours2 = hours1 / 2;
            document.getElementById('timeEstimate').textContent = `‚è±Ô∏è Est. ${hours1} hrs (1 mom) or ${hours2} hrs (2 moms)`;

            // Update print version
            updatePrintVersion(serviceType, homeSize, basePrice, familyCare, familyCarePrice, addonsList, addonsTotal, recurringPct, discountAmount, referralDiscount, total, hours1);
        }

        function updatePrintVersion(serviceType, homeSize, basePrice, familyCare, familyCarePrice, addonsList, addonsTotal, recurringPct, discountAmount, referralDiscount, total, hours1) {
            const serviceName = serviceType === 'premium' ? 'Premium Clean' : 'Basic Clean';
            const hours2 = hours1 / 2;
            
            let html = `
                <div class="print-row">
                    <span>${serviceName} (${formatHomeSize(homeSize)})</span>
                    <span>$${basePrice}</span>
                </div>
            `;

            if (familyCare) {
                html += `
                    <div class="print-row">
                        <span style="padding-left: 1rem;">+ Family Care Add-On</span>
                        <span>$${familyCarePrice}</span>
                    </div>
                `;
            }

            if (addonsList.length > 0) {
                for (const addon of addonsList) {
                    const qtyText = addon.qty > 1 ? ` √ó${addon.qty}` : '';
                    html += `
                        <div class="print-row">
                            <span style="padding-left: 1rem;">+ ${addon.name}${qtyText}</span>
                            <span>$${addon.total}</span>
                        </div>
                    `;
                }
            }

            if (discountAmount > 0) {
                html += `
                    <div class="print-row" style="color: var(--sage-dark);">
                        <span>Recurring Discount (${recurringPct}%)</span>
                        <span>-$${discountAmount}</span>
                    </div>
                `;
            }

            if (referralDiscount > 0) {
                html += `
                    <div class="print-row" style="color: var(--sage-dark);">
                        <span>Referral Thank-You</span>
                        <span>-$${referralDiscount}</span>
                    </div>
                `;
            }

            html += `
                <div class="print-row" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #e0e0e0;">
                    <span><strong>Estimated Time</strong></span>
                    <span>${hours1} hrs (1 mom) / ${hours2} hrs (2 moms)</span>
                </div>
            `;

            document.getElementById('printServiceDetails').innerHTML = html;
            document.getElementById('printTotal').textContent = `$${total}`;
            
            // Client info
            document.getElementById('printClientName').textContent = document.getElementById('clientName').value || '‚Äî';
            document.getElementById('printClientPhone').textContent = document.getElementById('clientPhone').value || '‚Äî';
            document.getElementById('printClientAddress').textContent = document.getElementById('clientAddress').value || '‚Äî';
            
            const notes = document.getElementById('clientNotes').value;
            if (notes) {
                document.getElementById('printNotesRow').style.display = 'flex';
                document.getElementById('printClientNotes').textContent = notes;
            } else {
                document.getElementById('printNotesRow').style.display = 'none';
            }
            
            // Date
            const today = new Date();
            document.getElementById('printDate').textContent = today.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function printQuote() {
            calculate(); // Ensure latest data
            window.print();
        }

        function resetForm() {
            // Reset all inputs
            document.getElementById('clientName').value = '';
            document.getElementById('clientPhone').value = '';
            document.getElementById('clientAddress').value = '';
            document.getElementById('clientNotes').value = '';
            document.getElementById('servicePremium').checked = true;
            document.getElementById('size3b2b').checked = true;
            document.getElementById('familyCare').checked = false;
            document.getElementById('recurringDiscount').value = '0';
            document.getElementById('referralDiscount').checked = false;
            
            // Reset all add-ons
            for (const id of Object.keys(addons)) {
                const checkbox = document.getElementById(id);
                if (checkbox) checkbox.checked = false;
            }
            
            // Reset quantities to defaults
            document.getElementById('addonCabinetsQty').value = '0';
            
            calculate();
        }

        // ============================================
        // GOOGLE SHEETS INTEGRATION
        // ============================================
        // Replace this URL with your Google Apps Script Web App URL
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzDyJUVJoLgsUXDttdaAaR9WetKxXumJ6d_vs8_x2oU3F0hUokRse_CyM6pP1DxOhQ3Tw/exec';

        async function saveQuote() {
            const btn = document.getElementById('btnSave');
            const status = document.getElementById('saveStatus');
            
            // Validate required fields
            const clientName = document.getElementById('clientName').value.trim();
            const clientPhone = document.getElementById('clientPhone').value.trim();
            
            if (!clientName || !clientPhone) {
                status.className = 'save-status error';
                status.textContent = '‚ö†Ô∏è Please enter client name and phone';
                return;
            }

            // Check if Google Script URL is configured
            if (GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_SCRIPT_URL_HERE') {
                status.className = 'save-status error';
                status.textContent = '‚ö†Ô∏è Google Sheets not configured. See setup instructions.';
                return;
            }
            
            // Show loading
            btn.disabled = true;
            btn.textContent = '‚è≥ Saving...';
            status.className = 'save-status loading';
            status.textContent = 'Connecting to Google Sheets...';

            // Gather all data
            const serviceType = getSelectedServiceType();
            const homeSize = getSelectedHomeSize();
            const familyCare = document.getElementById('familyCare').checked;
            const recurringDiscount = document.getElementById('recurringDiscount').value;
            const referralDiscount = document.getElementById('referralDiscount').checked;
            
            // Get add-ons
            const selectedAddons = [];
            for (const [id, data] of Object.entries(addons)) {
                const checkbox = document.getElementById(id);
                if (checkbox && checkbox.checked) {
                    let qty = 1;
                    if (data.hasQty) {
                        qty = parseInt(document.getElementById(data.qtyId).value) || 1;
                    }
                    selectedAddons.push(`${data.name}${qty > 1 ? ' x' + qty : ''}`);
                }
            }

            // Get recurring label
            const recurringLabels = {
                '0': 'One-time',
                '10': 'Weekly (10% off)',
                '7': 'Bi-weekly (7% off)',
                '5': 'Monthly (5% off)'
            };

            // Calculate total
            const baseData = pricing[serviceType][homeSize];
            let subtotal = baseData.price + (familyCare ? 50 : 0);
            
            // Add add-ons total
            for (const [id, data] of Object.entries(addons)) {
                const checkbox = document.getElementById(id);
                if (checkbox && checkbox.checked) {
                    let qty = 1;
                    if (data.hasQty) {
                        qty = parseInt(document.getElementById(data.qtyId).value) || 1;
                    }
                    subtotal += data.price * qty;
                }
            }

            const discountPct = parseInt(recurringDiscount) || 0;
            const discountAmount = Math.round(subtotal * (discountPct / 100));
            const referralAmount = referralDiscount ? 25 : 0;
            const total = subtotal - discountAmount - referralAmount;

            const quoteData = {
                timestamp: new Date().toISOString(),
                clientName: clientName,
                clientPhone: clientPhone,
                clientAddress: document.getElementById('clientAddress').value.trim(),
                serviceType: serviceType === 'premium' ? 'Premium Clean' : 'Basic Clean',
                homeSize: formatHomeSize(homeSize),
                familyCare: familyCare ? 'Yes' : 'No',
                addons: selectedAddons.join(', ') || 'None',
                recurring: recurringLabels[recurringDiscount] || 'One-time',
                referral: referralDiscount ? 'Yes' : 'No',
                subtotal: subtotal,
                discounts: discountAmount + referralAmount,
                total: total,
                timeEstimate: `${baseData.hours1} hrs (1 mom) / ${baseData.hours1 / 2} hrs (2 moms)`,
                notes: document.getElementById('clientNotes').value.trim()
            };

            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(quoteData)
                });

                // With no-cors, we can't read the response, but if no error thrown, assume success
                status.className = 'save-status success';
                status.textContent = '‚úÖ Quote saved to Google Sheets!';
                btn.textContent = '‚úì Saved!';
                
                setTimeout(() => {
                    btn.disabled = false;
                    btn.textContent = 'üíæ Save Quote to Sheet';
                }, 2000);

            } catch (error) {
                console.error('Error saving quote:', error);
                status.className = 'save-status error';
                status.textContent = '‚ùå Error saving. Check connection and try again.';
                btn.disabled = false;
                btn.textContent = 'üíæ Save Quote to Sheet';
            }
        }

        // ============================================
        // MAIN CALCULATOR FUNCTIONS
        // ============================================

        // Event Listeners
        document.querySelectorAll('input, select').forEach(el => {
            el.addEventListener('input', calculate);
            el.addEventListener('change', calculate);
        });

        // Initial calculation
        calculate();
    </script>
</body>
</html>
